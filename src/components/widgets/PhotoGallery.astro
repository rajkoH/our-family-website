---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';

export interface Props {
  title?: string;
  subtitle?: string;
  tagline?: string;
  images: Array<{
    src: string;
    alt: string;
    caption?: string;
    width?: number;
    height?: number;
  }>;
  id?: string;
  isDark?: boolean;
  classes?: Record<string, string>;
}

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),
  images = [],
  id,
  isDark = false,
  classes = {},
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-7xl ${classes?.container ?? ''}`}>
  <div class="max-w-6xl mx-auto">
    {
      (tagline || title || subtitle) && (
        <div class="mb-10 md:mx-auto text-center md:mb-12 max-w-3xl">
          {tagline && (
            <p
              class="text-base text-secondary dark:text-orange-200 font-bold tracking-wide uppercase"
              set:html={tagline}
            />
          )}
          {title && (
            <h2
              class="text-4xl md:text-5xl font-bold leading-tighter tracking-tighter mb-4 font-heading"
              set:html={title}
            />
          )}
          {subtitle && (
            <p class="max-w-3xl mx-auto sm:text-center text-xl text-muted dark:text-slate-400" set:html={subtitle} />
          )}
        </div>
      )
    }

    <!-- Photo Gallery Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
      {
        images.map((image, index) => (
          <div
            class:list={[
              'group relative overflow-hidden rounded-2xl shadow-md hover:shadow-xl transition-all duration-300',
              { 'md:col-span-2 md:row-span-2': index === 0 }, // Make first image larger
            ]}
          >
            <img
              src={image.src}
              alt={image.alt}
              width={image.width || 1200}
              height={image.height || 800}
              class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"
              loading={index === 0 ? 'eager' : 'lazy'}
              style={index === 0 ? 'min-height: 500px;' : 'min-height: 300px;'}
            />
            {image.caption && (
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6">
                <p class="text-white text-sm md:text-base font-medium">{image.caption}</p>
              </div>
            )}
          </div>
        ))
      }
    </div>
  </div>
</WidgetWrapper>

<style>
  @media (max-width: 768px) {
    .grid > div:first-child {
      min-height: 400px !important;
    }
  }
</style>
