---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';

export interface Props {
  title?: string;
  subtitle?: string;
  tagline?: string;
  story?: string;
  image?: string;
  imageAlt?: string;
  imageWidth?: number;
  imageHeight?: number;
  reverse?: boolean;
  id?: string;
  isDark?: boolean;
  classes?: Record<string, string>;
}

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),
  story = await Astro.slots.render('default'),
  image,
  imageAlt = '',
  imageWidth = 800,
  imageHeight = 600,
  reverse = false,
  id,
  isDark = false,
  classes = {},
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-6xl ${classes?.container ?? ''}`}>
  <div
    class:list={[
      'flex flex-col gap-8 md:gap-12',
      { 'md:flex-row-reverse': reverse, 'md:flex-row': !reverse },
    ]}
  >
    <!-- Image Side -->
    {
      image && (
        <div class="flex-1 flex items-center justify-center">
          <div class="relative w-full max-w-md">
            <div class="absolute inset-0 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-3xl transform rotate-3" />
            <img
              src={image}
              alt={imageAlt}
              width={imageWidth}
              height={imageHeight}
              class="relative rounded-3xl shadow-2xl w-full h-auto object-cover"
              loading="lazy"
            />
          </div>
        </div>
      )
    }

    <!-- Content Side -->
    <div class="flex-1 flex flex-col justify-center">
      {
        tagline && (
          <p class="text-base text-secondary dark:text-blue-200 font-semibold tracking-wide uppercase mb-2">
            {tagline}
          </p>
        )
      }
      {
        title && (
          <h2 class="text-3xl md:text-4xl font-bold leading-tight tracking-tight mb-4 font-heading">{title}</h2>
        )
      }
      {
        subtitle && <p class="text-xl text-muted dark:text-slate-400 mb-6 leading-relaxed">{subtitle}</p>
      }
      <div class="prose prose-lg max-w-none dark:prose-invert prose-p:text-default prose-p:leading-relaxed">
        <Fragment set:html={story} />
      </div>
      <slot />
    </div>
  </div>
</WidgetWrapper>

